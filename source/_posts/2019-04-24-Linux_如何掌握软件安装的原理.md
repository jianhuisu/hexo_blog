---
title : 软件安装的原理
tags : 
	- Linux
---

笔记只是提供一个思路，并不能确保一定会成功

## 为什么软件的安装依赖操作系统

先看一下可执行二进制文件的生成过程

	1. 预处理：主要对源码预编译语句（如宏定义define）和文件包含进行处理
	2. 编译：对预处理以后文件进行编译，生成汇编语言文件
	3. 汇编：汇编是生成二进制机器代码的过程，汇编后的文件以.o结尾，称为目标文件
	4. 链接：将多个由汇编生成的目标文件以及引用的库文件进行模块链接，生成一个完整的可执行文件

第四步中，`目标文件`需要与`库文件`进行模块链接完成后，才可以生成一个**完整**的`可执行文件`。什么是库文件呢？操作系统是各个软件运行的平台，操作系统负责处理各种硬件差异，使其对上层的表现统一。但是不同的操作系统对上层暴露的接口之间并没有一个统一的规范，导致每个操作系统的接口都存在或多或少的差别。比如接口名称不同，接口文件存储位置不同等等...我们可以将这些由操作系统定义的操作接口理解为`库函数`。由于链接库函数这一步骤依赖于操作系统，所以软件对操作系统也具有依赖性。

## 软件的安装方式
	
### 源码编译安装

源码编译安装就是将源代码的压缩包download到主机，解压后执行上文中的`1,2,3,4`步骤。
	
### RPM包管理器安装

RPM包是软件的发布者已经在自己的主机上对源代码进行了编译，即把执行了`1,2,3,4`步骤后产生的二进制文件，以及安装包的一些简要说明进行打包压缩，供我们下载安装。

这里有三个注意事项：
	
1 RPM依赖于操作系统，只有当我们的主机系统与RPM包编译时所在主机的操作系统一致时，RPM正确安装的可能性才会最大。比如去mysql官网下载RPM包时，系统会提示我们先选择linux的distribution

2 RPM包在安装时，会将包的版本等信息记入本机数据库，供后续升级、卸载、查询使用

3 因为RPM安装时处理依赖关系比较麻烦，现在安装多数使用yum方式安装，RPM的使用多限于包的查询

### 基于RPM的包管理器:Yum

因为Linux上各种软件经常存在依赖关系，安装一个软件可能附带需要先安装其它软件，解决依赖关系对软件的制作者是容易的，但是对于软件的使用者是困难的。所以依赖关系最好能由作者处理。于是这些开发者们做了下面两件事

1. 将所有的软件安装包汇总到一个站点,这个站点我们称之为 `yum源`
1. 软件制作者在制作安装包时附带一个侦测程序，在软件安装之前侦测依赖软件是否安装，未安装的依赖程序去yum源中download


### 小结

总体来说，各linux distribution发行商都有自己维护的依赖包管理器

- Mac: homebrew
- Windows:这个比较特殊，有时候会自己集成，有时候会提示你自己先下载
- Centos:yum
- Ubuntu:apt-get

其中`dpkg`于`apt-get`就相当于`rpm`于`yum`
 
掌握了上面的核心思想，我们就可以针对软件安装过程中的部分错误进行针对性的分析

## 感悟
	
软件安装在我刚接触Linux时对我来说是一大痛点，老师讲的我就是不能理解，现在我将自己的感悟记录下来，希望可以对后来者有些许帮助。

描述不足之处还望大家多多见谅。

## 参考资料

https://www.cnblogs.com/demonxian3/p/7460525.html
